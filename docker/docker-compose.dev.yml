# 开发环境配置
services:
  audio-transcription:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: audio-transcription-dev
    ports:
      - "8998:8998"
    env_file:
      - ../.env  # 从项目根目录加载环境变量
    environment:
      - PRELOAD_MODELS=false
      - CLEANUP_INTERVAL_HOURS=1
    volumes:
      # 开发模式：挂载源代码，支持热重载
      - ..:/app
      - ../uploads:/app/uploads
      - ../transcripts:/app/transcripts
      - ../audio_temp:/app/audio_temp
      - ../meeting_summaries:/app/meeting_summaries
    command: ["python", "main.py"]
    networks:
      - transcription-network

networks:
  transcription-network:
    driver: bridge

